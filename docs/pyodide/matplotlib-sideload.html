<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Python - iodide</title>
<link rel="stylesheet" type="text/css" href="https://iodide.io/dist/iodide.pyodide-20180623.css">
</head>
<body>
<script id="jsmd" type="text/jsmd">
%% meta
{
  "title": "Python",
  "languages": {
    "js": {
      "pluginType": "language",
      "languageId": "js",
      "displayName": "Javascript",
      "codeMirrorMode": "javascript",
      "module": "window",
      "evaluator": "eval",
      "keybinding": "j",
      "url": ""
    },
    "py": {
      "languageId": "py",
      "displayName": "python",
      "codeMirrorMode": "python",
      "keybinding": "p",
      "url": "https://iodide.io/pyodide-demo/pyodide.js",
      "module": "pyodide",
      "evaluator": "runPython",
      "pluginType": "language"
    }
  },
  "lastExport": "2018-05-04T17:13:00.489Z"
}

%% md

Press Shift+Enter on the cell below to display the plot.

%% code {"language":"py"}
</script>
<script>
 var blackout = document.createElement('div');
 blackout.setAttribute('style', 'width: 100%; height: 100%; position: absolute; left: 0; top: 0; background-color: #00000066; z-index: 10');
 document.body.appendChild(blackout);

 var url_string = window.location;
 var url = new URL(url_string);
 var content = url.searchParams.get("sideload");
 fetch(content).then((response) => response.text())
   .then((text) => {
     let jsmd = document.getElementById('jsmd');
     jsmd.innerHTML = jsmd.innerHTML + text;
     let script = document.createElement('script');
     script.src = 'https://iodide.io/dist/iodide.pyodide-20180623.js';
     script.onload = () => {
         let pyodide = document.createElement('script');
         pyodide.src = 'https://iodide.io/pyodide-demo/pyodide.js';
         pyodide.onload = () => {
             languagePluginLoader.then(() => {
                 window.pyodide.loadPackage('matplotlib').then(() => {
                     window.pyodide.runPython('__name__ = "__main__"');
                     blackout.parentNode.removeChild(blackout);
                 });
             });
         };
         document.body.appendChild(pyodide);
     }
     document.body.appendChild(script);
   });
</script>
<div id='page'></div>
</body>
</html>
